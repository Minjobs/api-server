<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>MURDOO K - ‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏¢‡∏ò‡∏á 5 ‡∏™‡∏µ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600;800&family=Nanum+Myeongjo:wght@700;800&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <style>
        :root {
            --bg-overlay: rgba(0, 0, 0, 0.75); /* Î∞∞Í≤Ω Î∞ïÏä§ Îçî ÏßÑÌïòÍ≤å */
            --point-gold: #ffd700;
            --point-red: #ff4757;
            --text-white: #ffffff;
            --border-line: rgba(255, 215, 0, 0.5); 
            --glow-gold: 0 0 15px rgba(255, 215, 0, 0.6);
        }

        body {
            margin: 0; padding: 0;
            background-color: #050505;
            font-family: 'Kanit', sans-serif;
            color: var(--text-white);
            min-height: 100vh;
            display: flex; flex-direction: column; align-items: center;
            overflow-x: hidden;
            -webkit-tap-highlight-color: transparent;
        }

        .background-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
            background-image: url('/background.jpg'); 
            background-size: cover; background-position: center;
            opacity: 0.5; 
        }

        .header-logo { margin-top: 25px; margin-bottom: 20px; z-index: 10; cursor: pointer; transition: 0.3s; }
        .header-logo img { height: 40px; }
        .header-logo:active { transform: scale(0.95); }

        /* --- [Î©îÏù∏ Ïª®ÌÖåÏù¥ÎÑà: Ïú†Î¶¨ Î∞ïÏä§ Ïä§ÌÉÄÏùº] --- */
        .container {
            width: 90%; max-width: 440px;
            background-color: var(--bg-overlay);
            border-radius: 35px;
            padding: 35px 20px 45px 20px;
            box-sizing: border-box;
            backdrop-filter: blur(15px);
            border: 2px solid var(--border-line);
            text-align: center;
            box-shadow: 0 20px 60px rgba(0,0,0,0.7);
            margin-bottom: 40px;
            position: relative;
            overflow: hidden;
        }

        .intro-text h1 { 
            font-family: 'Nanum Myeongjo', serif; 
            font-size: 1.9rem; color: var(--point-gold); 
            text-shadow: var(--glow-gold); margin: 0 0 10px 0; 
        }
        .intro-text p { font-size: 0.95rem; opacity: 0.8; font-weight: 300; line-height: 1.6; margin: 0 0 15px 0; }

        /* --- [ÍπÉÎ∞ú Ïï†ÎãàÎ©îÏù¥ÏÖò Ïä§ÌÖåÏù¥ÏßÄ] --- */
        .stage-wrapper {
            height: 280px;
            display: flex; justify-content: center; align-items: center;
            position: relative;
            margin: 0 auto;
            width: 100%;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            margin-bottom: 20px;
        }

        .flag-bundle {
            position: relative;
            width: 200px; height: 180px;
            transition: transform 0.1s;
        }

        .flag-img {
            position: absolute;
            width: 75px; height: auto;
            filter: drop-shadow(0 5px 12px rgba(0,0,0,0.6));
            transition: all 0.6s ease;
            transform-origin: bottom center;
        }

        /* ÍπÉÎ∞ú Ï¥àÍ∏∞ Î∞∞Ïπò (Î∂ÄÏ±ÑÍº¥) */
        .flag-img:nth-child(1) { transform: translate(0, 0) rotate(0deg); z-index: 3; } /* ÎÖ∏Îûë */
        .flag-img:nth-child(2) { transform: translate(-35px, 10px) rotate(-15deg); z-index: 2; } /* ÌååÎûë */
        .flag-img:nth-child(3) { transform: translate(35px, 10px) rotate(15deg); z-index: 2; } /* Îπ®Í∞ï */
        .flag-img:nth-child(4) { transform: translate(-65px, 25px) rotate(-30deg); z-index: 1; } /* Ìù∞ÏÉâ */
        .flag-img:nth-child(5) { transform: translate(65px, 25px) rotate(30deg); z-index: 1; } /* Í≤ÄÏ†ï */

        /* ‚úÖ [Ïï†ÎãàÎ©îÏù¥ÏÖò ÏàòÏ†ï] Ïñ¥ÏßÄÎüΩÏßÄ ÏïäÍ≤å Ï≤úÏ≤úÌûà Î∂ÄÎìúÎüΩÍ≤å ÏÑûÏûÑ */
        .shaking .flag-bundle {
            animation: gentle-mix 1.5s ease-in-out infinite;
        }
        .shaking .flag-img {
            left: 50%; top: 50%;
            margin-left: -37.5px; margin-top: -60px;
            transform: translate(0,0) rotate(0deg) !important;
            opacity: 0.9;
        }

        @keyframes gentle-mix {
            0% { transform: rotate(0deg) translate(0px, 0px); }
            25% { transform: rotate(5deg) translate(-8px, 5px); }
            50% { transform: rotate(0deg) translate(0px, 10px); }
            75% { transform: rotate(-5deg) translate(8px, 5px); }
            100% { transform: rotate(0deg) translate(0px, 0px); }
        }

        /* --- [Í≤∞Í≥º ÌôîÎ©¥] --- */
        #result-display {
            display: none;
            flex-direction: column; align-items: center;
            padding: 10px 0;
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .result-stage {
            border: 2px solid var(--point-gold);
            background: rgba(0,0,0,0.3);
            border-radius: 20px;
            padding: 25px 15px;
            margin-bottom: 25px;
            width: 100%; box-sizing: border-box;
            box-shadow: inset 0 0 20px rgba(255, 215, 0, 0.1);
        }

        .result-flag-img { 
            width: 140px; margin-bottom: 15px; 
            filter: drop-shadow(0 0 15px rgba(255,255,255,0.2));
            animation: float 3s ease-in-out infinite;
        }
        @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-8px); } }

        .fate-title { font-size: 1.8rem; font-weight: 800; color: var(--point-gold); margin-bottom: 10px; line-height: 1.2; }
        .fate-desc { font-size: 1rem; font-weight: 300; line-height: 1.7; color: #eee; margin-bottom: 15px; word-break: break-word; }

        /* Ìùâ(Í≤ÄÏ†ï)Ïùº Îïå Ïä§ÌÉÄÏùº */
        .container.bad-luck { border-color: var(--point-red); box-shadow: 0 20px 60px rgba(255, 71, 87, 0.2); }
        .bad-luck .result-stage { border-color: var(--point-red); box-shadow: inset 0 0 20px rgba(255, 71, 87, 0.2); }
        .bad-luck .fate-title { color: var(--point-red); }

        /* --- [Î≤ÑÌäº Ïä§ÌÉÄÏùº] --- */
        .action-btn {
            width: 85%; padding: 16px; border: none; border-radius: 40px;
            font-size: 1.2rem; font-weight: 700; cursor: pointer; font-family: 'Kanit';
            transition: all 0.2s; margin: 0 auto; display: block;
        }
        
        #shakeBtn {
            background: linear-gradient(135deg, var(--point-gold), #f57c00);
            color: #000; box-shadow: 0 5px 20px rgba(255, 215, 0, 0.3);
        }
        #shakeBtn:active { transform: scale(0.96); }

        .retry-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.4); color: #ccc;
            width: auto; padding: 10px 30px; font-size: 0.95rem; display: inline-block;
        }
        .retry-btn:hover { background: rgba(255,255,255,0.1); color: #fff; }

        .aekdaem-btn { 
            background: var(--point-red); color: white; 
            box-shadow: 0 5px 20px rgba(255, 71, 87, 0.4); margin-bottom: 15px;
        }

        .hidden { display: none !important; }
        @keyframes popIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }
        
        footer { text-align: center; margin-top: 25px; color: rgba(255,255,255,0.3); font-size: 0.75rem; }
    </style>
</head>
<body>

    <div class="background-overlay"></div>

    <audio id="sfx-shake" src="/sound/shake.mp3" loop></audio>
    <audio id="sfx-result" src="/sound/result.mp3"></audio>

    <header class="header-logo" onclick="location.href='/'">
        <img src="/textlogo.png" alt="MURDOO K">
    </header>

    <main class="container">
        
        <div id="ritual-view">
            <div class="intro-text">
                <h1>‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏ó‡∏≤‡∏¢‡∏ò‡∏á 5 ‡∏™‡∏µ</h1>
                <p>‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏¥‡∏ï‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡∏ñ‡∏∂‡∏á‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÉ‡∏à<br>‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏ò‡∏á‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ä‡∏µ‡πâ‡πÅ‡∏ô‡∏∞‡∏à‡∏≤‡∏Å‡πÄ‡∏ó‡∏û‡πÄ‡∏à‡πâ‡∏≤</p>
            </div>

            <div class="stage-wrapper" id="stage">
                <div class="flag-bundle" id="flagBundle">
                    <img src="/flag/flag_yellow.png" class="flag-img" alt="Yellow">
                    <img src="/flag/flag_blue.png" class="flag-img" alt="Blue">
                    <img src="/flag/flag_red.png" class="flag-img" alt="Red">
                    <img src="/flag/flag_white.png" class="flag-img" alt="White">
                    <img src="/flag/flag_black.png" class="flag-img" alt="Black">
                </div>
            </div>

            <button id="shakeBtn" class="action-btn" onclick="startRitual()">‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏ò‡∏á (Shake)</button>
        </div>

        <div id="result-display">
            <div class="result-stage">
                <img src="" id="resImg" class="result-flag-img">
                <div class="fate-title" id="resTitle"></div>
                <div class="fate-desc" id="resDesc"></div>
            </div>
            
            <div id="btn-group-normal">
                <button class="action-btn retry-btn" onclick="resetAndReload()">‡∏≠‡∏ò‡∏¥‡∏©‡∏ê‡∏≤‡∏ô‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á</button>
            </div>

            <div id="btn-group-bad" style="display:none;">
                <button class="action-btn aekdaem-btn" onclick="doAekDaem()">‡∏™‡∏∞‡πÄ‡∏î‡∏≤‡∏∞‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå (Ward off Bad Luck)</button>
                <button class="action-btn retry-btn" style="border: none;" onclick="closeResultView()">‡∏¢‡∏≠‡∏°‡∏£‡∏±‡∏ö‡∏Ñ‡∏≥‡∏ó‡∏≥‡∏ô‡∏≤‡∏¢</button>
            </div>
        </div>

    </main>

    <footer>¬© 2026 MURDOO K. ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏´‡πà‡∏á‡∏î‡∏ß‡∏á‡∏î‡∏≤‡∏ß</footer>

    <script>
        // ‚úÖ 1. Ïò§Î∞©Í∏∞ Ìï¥ÏÑù Îç∞Ïù¥ÌÑ∞ (ÌÉúÍµ≠ ÌòÑÏßÄÌôî + ÏÉÅÏÑ∏ ÏÑ§Î™Ö)
        // ÌôïÎ•†: Math.random() ÏÇ¨Ïö©ÏúºÎ°ú Í∞Å 20% Í∑†Îì± ÌôïÎ•†
        const flags = [
            { 
                src: '/flag/flag_red.png', 
                status: 'üö© ‡∏ò‡∏á‡πÅ‡∏î‡∏á: ‡∏°‡∏´‡∏≤‡πÇ‡∏ä‡∏Ñ (Great Success)', 
                desc: '‡∏î‡∏ß‡∏á‡πÄ‡∏õ‡∏¥‡∏î ‡∏ü‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î! ‡∏™‡∏¥‡πà‡∏á‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÉ‡∏´‡πâ‡∏û‡∏£‡∏Ñ‡∏∏‡∏ì‡πÅ‡∏•‡πâ‡∏ß ‡∏™‡∏¥‡πà‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏Ñ‡∏¥‡∏î‡∏´‡∏£‡∏∑‡∏≠‡∏´‡∏ß‡∏±‡∏á‡πÑ‡∏ß‡πâ‡∏à‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏õ‡∏≤‡∏è‡∏¥‡∏´‡∏≤‡∏£‡∏¥‡∏¢‡πå ‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏Ñ‡∏•‡πà‡∏≠‡∏á‡∏ï‡∏±‡∏ß ‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏Å‡πâ‡∏≤‡∏ß‡∏´‡∏ô‡πâ‡∏≤ ‡πÄ‡∏õ‡πá‡∏ô‡∏à‡∏±‡∏á‡∏´‡∏ß‡∏∞‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏ó‡∏≥‡∏™‡∏¥‡πà‡∏á‡πÉ‡∏´‡∏°‡πà‡πÜ ‡∏•‡∏∏‡∏¢‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢!',
                isBad: false
            },
            { 
                src: '/flag/flag_white.png', 
                status: 'üè≥Ô∏è ‡∏ò‡∏á‡∏Ç‡∏≤‡∏ß: ‡πÄ‡∏ó‡∏û‡∏£‡∏±‡∏Å‡∏©‡∏≤ (Divine Blessing)', 
                desc: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ö‡∏£‡∏¥‡∏™‡∏∏‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡∏∞‡∏Ñ‡∏ß‡∏≤‡∏°‡∏à‡∏£‡∏¥‡∏á‡πÉ‡∏à‡∏à‡∏∞‡∏ä‡∏ô‡∏∞‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡πà‡∏á! ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏ï‡∏¥‡∏î‡∏Ç‡∏±‡∏î‡∏à‡∏∞‡∏Ñ‡∏•‡∏µ‡πà‡∏Ñ‡∏•‡∏≤‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏¢‡∏Å‡∏†‡∏π‡πÄ‡∏Ç‡∏≤‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏≠‡∏Å ‡∏à‡∏∞‡∏°‡∏µ "‡∏ú‡∏π‡πâ‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏à‡∏î‡∏µ" ‡∏´‡∏£‡∏∑‡∏≠‡∏Å‡∏±‡∏•‡∏¢‡∏≤‡∏ì‡∏°‡∏¥‡∏ï‡∏£‡∏¢‡∏∑‡πà‡∏ô‡∏°‡∏∑‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠ ‡πÉ‡∏´‡πâ‡∏´‡∏°‡∏±‡πà‡∏ô‡∏™‡∏ß‡∏î‡∏°‡∏ô‡∏ï‡πå‡πÑ‡∏´‡∏ß‡πâ‡∏û‡∏£‡∏∞‡πÅ‡∏•‡πâ‡∏ß‡∏ä‡∏µ‡∏ß‡∏¥‡∏ï‡∏à‡∏∞‡∏£‡∏∏‡πà‡∏á‡πÇ‡∏£‡∏à‡∏ô‡πå',
                isBad: false
            },
            { 
                src: '/flag/flag_yellow.png', 
                status: 'üü° ‡∏ò‡∏á‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á: ‡∏•‡∏≤‡∏†‡∏ö‡∏£‡∏£‡∏û‡∏ä‡∏ô (Ancestral Favor)', 
                desc: '‡∏ö‡∏£‡∏£‡∏û‡∏ö‡∏∏‡∏£‡∏∏‡∏©‡πÅ‡∏•‡∏∞‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏à‡πâ‡∏≤‡∏ó‡∏≤‡∏á‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏°‡∏≠‡∏á‡∏î‡∏π‡∏Ñ‡∏∏‡∏ì‡∏≠‡∏¢‡∏π‡πà! ‡∏ó‡πà‡∏≤‡∏ô‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏™‡∏°‡∏´‡∏ß‡∏±‡∏á ‡πÅ‡∏ï‡πà‡∏≠‡∏≤‡∏à‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏´‡πâ‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏≥‡∏ö‡∏∏‡∏ç‡∏≠‡∏∏‡∏ó‡∏¥‡∏®‡∏™‡πà‡∏ß‡∏ô‡∏Å‡∏∏‡∏®‡∏•‡πÉ‡∏´‡πâ‡∏ó‡πà‡∏≤‡∏ô‡∏ö‡πâ‡∏≤‡∏á ‡∏•‡∏≠‡∏á‡∏ñ‡∏ß‡∏≤‡∏¢‡∏Ç‡∏≠‡∏á‡πÑ‡∏´‡∏ß‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏ó‡∏≥‡∏ö‡∏∏‡∏ç‡πÇ‡∏•‡∏á‡∏®‡∏û ‡πÅ‡∏•‡πâ‡∏ß‡πÇ‡∏ä‡∏Ñ‡∏•‡∏≤‡∏†‡πÅ‡∏ö‡∏ö‡∏ü‡∏•‡∏∏‡πä‡∏Ñ‡πÜ ‡∏à‡∏∞‡∏ß‡∏¥‡πà‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏´‡∏≤‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏±‡∏ô‡∏ó‡∏µ',
                isBad: false
            },
            { 
                src: '/flag/flag_blue.png', 
                status: 'üîµ ‡∏ò‡∏á‡∏ô‡πâ‡∏≥‡πÄ‡∏á‡∏¥‡∏ô: ‡∏Ñ‡∏•‡∏∑‡πà‡∏ô‡∏•‡∏°‡πÅ‡∏õ‡∏£‡∏õ‡∏£‡∏ß‡∏ô (Turbulence)', 
                desc: '‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡∏Å‡πà‡∏≠‡∏ô‡∏ô‡∏∞! ‡∏ä‡πà‡∏ß‡∏á‡∏ô‡∏µ‡πâ‡∏à‡∏¥‡∏ï‡πÉ‡∏à‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏ß‡πâ‡∏≤‡∏ß‡∏∏‡πà‡∏ô ‡∏°‡∏µ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡πâ‡∏Å‡∏±‡∏á‡∏ß‡∏•‡πÉ‡∏à ‡∏´‡∏£‡∏∑‡∏≠‡∏°‡∏µ‡πÄ‡∏Å‡∏ì‡∏ë‡πå‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏Å‡∏•/‡πÇ‡∏¢‡∏Å‡∏¢‡πâ‡∏≤‡∏¢‡∏Å‡∏∞‡∏ó‡∏±‡∏ô‡∏´‡∏±‡∏ô ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡∏Ñ‡∏≥‡∏û‡∏π‡∏î‡πÅ‡∏•‡∏∞‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÉ‡∏´‡πâ‡∏°‡∏≤‡∏Å ‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÉ‡∏à‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÉ‡∏´‡∏ç‡πà‡πÉ‡∏ô‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ ‡∏£‡∏≠‡πÉ‡∏´‡πâ‡∏û‡∏≤‡∏¢‡∏∏‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏õ‡∏Å‡πà‡∏≠‡∏ô',
                isBad: false 
            },
            { 
                src: '/flag/flag_black.png', 
                status: 'üè¥ ‡∏ò‡∏á‡∏î‡∏≥: ‡∏≠‡∏±‡∏ô‡∏ï‡∏£‡∏≤‡∏¢! (Warning / Stop)', 
                desc: '‡∏´‡∏¢‡∏∏‡∏î‡πÄ‡∏î‡∏µ‡πã‡∏¢‡∏ß‡∏ô‡∏µ‡πâ! ‡∏ó‡πà‡∏≤‡∏ô‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÅ‡∏£‡∏á‡πÜ ‡∏ß‡πà‡∏≤‡∏≠‡∏¢‡πà‡∏≤‡πÄ‡∏û‡∏¥‡πà‡∏á‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á! ‡∏™‡∏ñ‡∏≤‡∏ô‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏î‡∏µ‡πÄ‡∏•‡∏¢ ‡∏£‡∏∞‡∏ß‡∏±‡∏á‡πÇ‡∏î‡∏ô‡∏´‡∏•‡∏≠‡∏Å ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏∏‡∏ö‡∏±‡∏ï‡∏¥‡πÄ‡∏´‡∏ï‡∏∏ ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏´‡πâ‡πÑ‡∏õ‡∏ó‡∏≥‡∏ö‡∏∏‡∏ç‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏õ‡∏•‡∏≤ ‡∏´‡∏£‡∏∑‡∏≠‡∏ö‡∏£‡∏¥‡∏à‡∏≤‡∏Ñ‡∏ó‡∏≤‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏Å‡πâ‡πÄ‡∏Ñ‡∏•‡πá‡∏î (‡∏™‡∏∞‡πÄ‡∏î‡∏≤‡∏∞‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå) ‡πÇ‡∏î‡∏¢‡∏î‡πà‡∏ß‡∏ô',
                isBad: true // Ìùâ
            }
        ];

        const shakeBtn = document.getElementById('shakeBtn');
        const stage = document.getElementById('stage');
        const ritualView = document.getElementById('ritual-view');
        const resultDisplay = document.getElementById('result-display');
        
        const sfxShake = document.getElementById('sfx-shake');
        const sfxResult = document.getElementById('sfx-result');

        let isShaking = false;

        function startRitual() {
            if (isShaking) return;
            isShaking = true;

            shakeBtn.innerText = "‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏∑‡πà‡∏≠‡∏™‡∏≤‡∏£...";
            shakeBtn.disabled = true;
            stage.classList.add('shaking'); // Î∂ÄÎìúÎü¨Ïö¥ ÏÑûÍ∏∞ Î™®ÏÖò ÏãúÏûë

            // Î™®Î∞îÏùº ÏßÑÎèô (Î∂ÄÎìúÎü¨Ïö¥ Ìå®ÌÑ¥)
            if (navigator.vibrate) navigator.vibrate([100, 200, 100, 200]); 
            
            try { sfxShake.play().catch(() => {}); } catch(e){}

            // 2.5Ï¥à ÎèôÏïà ÏÑûÍ∏∞
            setTimeout(() => {
                stopRitual();
            }, 2500);
        }

        function stopRitual() {
            stage.classList.remove('shaking');
            try { 
                sfxShake.pause(); 
                sfxShake.currentTime = 0;
                sfxResult.play().catch(() => {}); 
            } catch(e){}

            // ‚úÖ Í≤∞Í≥º Ï∂îÏ≤® (20% ÌôïÎ•†)
            const result = flags[Math.floor(Math.random() * flags.length)];
            showResult(result);

            shakeBtn.disabled = false;
            isShaking = false;
        }

        function showResult(data) {
            // ÌôîÎ©¥ Ï†ÑÌôò
            ritualView.classList.add('hidden');
            resultDisplay.style.display = 'flex';

            document.getElementById('resImg').src = data.src;
            document.getElementById('resTitle').innerText = data.status;
            document.getElementById('resDesc').innerText = data.desc;

            // Ìùâ(Í≤ÄÏ†ï)Ïùº Í≤ΩÏö∞ Ïä§ÌÉÄÏùº Î≥ÄÍ≤Ω
            const mainContainer = document.querySelector('.container');
            if (data.isBad) {
                mainContainer.classList.add('bad-luck');
                document.getElementById('btn-group-normal').style.display = 'none';
                document.getElementById('btn-group-bad').style.display = 'block';
                if (navigator.vibrate) navigator.vibrate(500); // ÌùâÏùº Îïå Í∏¥ ÏßÑÎèô
            } else {
                mainContainer.classList.remove('bad-luck');
                document.getElementById('btn-group-normal').style.display = 'block';
                document.getElementById('btn-group-bad').style.display = 'none';
            }
        }

        function closeResultView() {
            const mainContainer = document.querySelector('.container');
            mainContainer.classList.remove('bad-luck');
            resultDisplay.style.display = 'none';
            ritualView.classList.remove('hidden');
            shakeBtn.innerText = "‡πÄ‡∏Ç‡∏¢‡πà‡∏≤‡∏ò‡∏á (Shake)";
        }

        function resetAndReload() {
            location.reload();
        }

        // Ïï°ÎïúÌïòÍ∏∞ (SweetAlert2 ÏÇ¨Ïö©)
        function doAekDaem() {
            Swal.fire({
                title: '‡∏™‡∏∞‡πÄ‡∏î‡∏≤‡∏∞‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!',
                html: '‡πÑ‡∏î‡πâ‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏Ç‡∏°‡∏≤‡∏ï‡πà‡∏≠‡∏™‡∏¥‡πà‡∏á‡∏®‡∏±‡∏Å‡∏î‡∏¥‡πå‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡πÅ‡∏•‡πâ‡∏ß<br>‡∏£‡πâ‡∏≤‡∏¢‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡∏î‡∏µ ‡∏´‡∏ô‡∏±‡∏Å‡∏à‡∏∞‡∏Å‡∏•‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ö‡∏≤',
                icon: 'success',
                confirmButtonText: '‡∏™‡∏≤‡∏ò‡∏∏ (Amen)',
                confirmButtonColor: '#ff4757',
                background: '#1a1a1a',
                color: '#fff',
                customClass: {
                    popup: 'swal-custom'
                }
            }).then(() => {
                closeResultView();
            });
        }
    </script>
</body>
</html>
