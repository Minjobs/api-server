<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏´‡∏°‡∏≠‡∏î‡∏π K - ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏ß‡∏á‡∏ä‡∏∞‡∏ï‡∏≤</title>
    <script src="https://static.line-scdn.net/liff/edge/2/sdk.js"></script>
    <style>
        :root { --main-gold: #D4AF37; --bg-navy: #0A192F; }
        body { font-family: 'Inter', sans-serif; background-color: var(--bg-navy); color: white; margin: 0; padding: 20px; text-align: center; }
        .container { max-width: 500px; margin: auto; background: rgba(255, 255, 255, 0.05); padding: 30px; border-radius: 20px; border: 1px solid var(--main-gold); }
        h1 { color: var(--main-gold); font-size: 1.5rem; margin-bottom: 20px; }
        .input-group { text-align: left; margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-size: 0.9rem; color: #ccc; }
        input, select { width: 100%; padding: 12px; border-radius: 8px; border: none; background: rgba(255,255,255,0.1); color: white; font-size: 1rem; box-sizing: border-box; }
        button { width: 100%; padding: 15px; background: linear-gradient(45deg, #D4AF37, #F9D976); border: none; border-radius: 8px; color: #000; font-weight: bold; font-size: 1.1rem; cursor: pointer; margin-top: 20px; }
        #user-info { margin-top: 20px; font-size: 0.8rem; color: #888; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÆ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</h1>
        <p id="welcome-msg">‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö‡∏Ñ‡∏∏‡∏ì...</p>

        <form id="fortune-form">
            <div class="input-group">
                <label>‡∏ß‡∏±‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏µ‡πÄ‡∏Å‡∏¥‡∏î (ÏÉùÎÖÑÏõîÏùº)</label>
                <input type="date" id="birthDate" required>
            </div>
            <div class="input-group">
                <label>‡πÄ‡∏ß‡∏•‡∏≤‡πÄ‡∏Å‡∏¥‡∏î (ÌÉúÏñ¥ÎÇú ÏãúÍ∞Ñ)</label>
                <input type="time" id="birthTime">
            </div>
            <div class="input-group">
                <label>‡πÄ‡∏û‡∏® (ÏÑ±Î≥Ñ)</label>
                <select id="gender">
                    <option value="male">‡∏ä‡∏≤‡∏¢ (ÎÇ®ÏÑ±)</option>
                    <option value="female">‡∏´‡∏ç‡∏¥‡∏á (Ïó¨ÏÑ±)</option>
                    <option value="other">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (Í∏∞ÌÉÄ)</option>
                </select>
            </div>
            <button type="submit">‡∏î‡∏π‡∏î‡∏ß‡∏á‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ (Ïö¥ÏÑ∏ Î≥¥Í∏∞)</button>
        </form>
        
        <div id="user-info">LINE ID: <span id="userId">---</span></div>
    </div>

    <script>
        async function initLiff() {
            await liff.init({ liffId: "2008959346-MSTYfGPt" });
            if (!liff.isLoggedIn()) {
                liff.login();
            } else {
                const profile = await liff.getProfile();
                document.getElementById('welcome-msg').innerText = `‡∏Ñ‡∏∏‡∏ì ${profile.displayName} ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏£‡∏π‡πâ‡∏à‡∏±‡∏Å‡∏Ñ‡∏£‡∏±‡∏ö`;
                document.getElementById('userId').innerText = profile.userId;
            }
        }

        document.getElementById('fortune-form').onsubmit = async (e) => {
            e.preventDefault();
            const data = {
                date: document.getElementById('birthDate').value,
                time: document.getElementById('birthTime').value,
                gender: document.getElementById('gender').value
            };
            
            // Ïó¨Í∏∞ÏÑú ÏÑúÎ≤ÑÎ°ú Îç∞Ïù¥ÌÑ∞Î•º Î≥¥ÎÇ¥Í±∞ÎÇò Î©îÏãúÏßÄÎ•º Ï†ÑÏÜ°Ìï©ÎãàÎã§.
            await liff.sendMessages([{
                type: 'text',
                text: `[ÏûÖÎ†•ÏôÑÎ£å] ${data.date} / ${data.time} / ${data.gender}`
            }]);
            liff.closeWindow();
        };

        initLiff();
    </script>
</body>
</html>
